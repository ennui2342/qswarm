#!/usr/bin/env ruby

$stdout.sync = true

require 'qswarm'

usage = "#{$0} <configuration file>"
abort usage unless config = ARGV.shift

$greylog2_facility = config.split('.')[0]
$greylog2_host = ARGV.shift || 'localhost'

swarm = Qswarm::Swarm.load config
swarm.log.level = Logger::DEBUG
swarm.run
